const char* mainMenuItems[] = {
    "WiFi",
    "Bluetooth",
    "IR",
    "RFID and NFC",
    "nRF24",
    "SubGhz",
    "USB",
    "Tools",
    "Settings",
    "About",
    nullptr // Null-terminated to count items
};

const char* BluetoothMenuItems[] = {
    "Bluetooth Scan",
    "BLE Serial Monitor",
    "03- Bluetooth",
    "04- Bluetooth",
    "05- Bluetooth",
    "Back",
    nullptr
};

const char* IRMenuItems[] = {
    "01- IR",
    "02- IR",
    "03- IR",
    "04- Back",
    nullptr
};

const char* nRF24MenuItems[] = {
    "01- Scan",
    "02- Send",
    "03- Receive",
    "04- Clone",
    "05- Sniff",
    "06- Back",
    nullptr // Null-terminated to count items
};

const char* RFIDMenuItems[] = {
    "01- Read ID",
    "02- Clone Tag",
    "03- RFID",
    "04- RFID",
    "05- RFID",
    "06- RFID",
    "07- Back",
    nullptr // Null-terminated to count items
};

void handleMainMenuSelection(int selectedOption) {
    switch (selectedOption) {
        case 0: // WiFi
            WiFiMenu();
            break;
        case 1: // Bluetooth
            BluetoothMenu();
            break;
        case 2: // IR
            IRMenu();
            break;
        case 3: // RFID and NFC
            RFIDMenu();
            //NFCMenu(); // Temporarily disabled until implemented
            break;
        case 4: // nRF24
            //nRF24Menu(); // Temporarily disabled until implemented
            staticItems();
            tft.setTextDatum(TL_DATUM);
            tft.drawString("nRF24 Menu - Coming soon", SCREEN_WIDTH/2, SCREEN_HEIGHT/2);
            delay(1500);
            break;
        case 5: // SubGhz
            SubGhzMenu();
            break;
        case 6: // USB
            USBMenu();
            break;
        case 7: // Tools
            ToolsMenu();
            break;
        case 8: // Settings
            SettingsMenu();
            break;
        case 9: // About
            AboutMenu();
            break;
        default:
            Serial.println("Invalid menu selection");
            break;
    }
}


void nRF24Menu() {
    Serial.println("Parsed nRF24 Menu Items:");
    for (int i = 0; nRF24MenuItems[i] != nullptr; i++) {
        Serial.println(nRF24MenuItems[i]);
    }
    userInterface("nRF24 Menu", nRF24MenuItems, handlenRF24MenuSelection);
} 

void RFIDMenu() {
    Serial.println("Parsed RFID Menu Items:");
    for (int i = 0; RFIDMenuItems[i] != nullptr; i++) {
        Serial.println(RFIDMenuItems[i]);
    }
    userInterface("RFID Menu", RFIDMenuItems, handleRFIDMenuSelection);
}

void IRMenu() {
    Serial.println("Parsed IR Menu Items:");
    for (int i = 0; IRMenuItems[i] != nullptr; i++) {
        Serial.println(IRMenuItems[i]);
    }
    userInterface("IR Menu", IRMenuItems, handleIRMenuSelection);
}

void mainMenu() {
    Serial.println("Parsed Menu Items:");
    for (int i = 0; mainMenuItems[i] != nullptr; i++) {
        Serial.println(mainMenuItems[i]);
    }
    userInterface("Main Menu", mainMenuItems, handleMainMenuSelection);
}

void BluetoothMenu() {
    // Initialize Bluetooth if not already initialized
    static bool initialized = false;
    if (!initialized) {
        initBluetooth();
        initialized = true;
    }

    Serial.println("Parsed Bluetooth Menu Items:");
    for (int i = 0; BluetoothMenuItems[i] != nullptr; i++) {
        Serial.println(BluetoothMenuItems[i]);
    }
    userInterface("Bluetooth Menu", BluetoothMenuItems, handleBluetoothMenuSelection);
}